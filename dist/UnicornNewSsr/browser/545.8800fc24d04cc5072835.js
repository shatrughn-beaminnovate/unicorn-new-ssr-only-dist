"use strict";(self.webpackChunkunicorn_new_ssr=self.webpackChunkunicorn_new_ssr||[]).push([[545],{7545:(St,_,a)=>{a.r(_),a.d(_,{LoginModule:()=>At});var c=a(633),l=a(3679),Z=a(6809),v=a(8002),h=a(8939),T=a(8259),d=a.n(T),u=a(9019),t=a(7716),C=a(690),A=a(263),b=a(1741),q=a(4128),p=a(9783),x=a(2323),f=a(8583),S=a(8030),L=a(6627),U=a(4885),I=a(1790);function w(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",54),t.TgZ(1,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).alertMessage=""}),t.TgZ(2,"span",56),t._uU(3,"\xd7"),t.qZA(),t.TgZ(4,"span",57),t._uU(5,"Close"),t.qZA(),t.qZA(),t.TgZ(6,"p",58),t._uU(7),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(7),t.Oqu(e.alertMessage)}}function y(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Email Address is Required"),t.qZA())}function N(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"This Email Address is Not Valid"),t.qZA())}function R(i,n){if(1&i&&(t.TgZ(0,"div",59),t.YNc(1,y,2,0,"div",4),t.YNc(2,N,2,0,"div",4),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getLoginControls.email_id.errors.required),t.xp6(1),t.Q6J("ngIf",e.getLoginControls.email_id.errors.pattern)}}function F(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Password is Required"),t.qZA())}function J(i,n){if(1&i&&(t.TgZ(0,"div",59),t.YNc(1,F,2,0,"div",4),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getLoginControls.password.errors.required)}}function k(i,n){1&i&&(t.TgZ(0,"mat-icon"),t._UZ(1,"mat-spinner",60),t.qZA())}function O(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"form",6),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onLoginFormSubmit()}),t.TgZ(1,"h5",38),t._uU(2,"Login"),t.qZA(),t._UZ(3,"hr",7),t.YNc(4,w,8,1,"div",39),t.TgZ(5,"div",10),t.TgZ(6,"label",40),t._uU(7,"Email Address "),t.TgZ(8,"span",16),t._uU(9,"*"),t.qZA(),t.qZA(),t._UZ(10,"input",41),t.YNc(11,R,3,2,"div",18),t.qZA(),t.TgZ(12,"div",10),t.TgZ(13,"label",42),t._uU(14,"Password "),t.TgZ(15,"span",16),t._uU(16,"*"),t.qZA(),t.qZA(),t._UZ(17,"input",43),t.YNc(18,J,2,1,"div",18),t.qZA(),t.TgZ(19,"div",44),t.TgZ(20,"div",45),t.TgZ(21,"a",46),t._uU(22,"Return To Store"),t.qZA(),t.qZA(),t.TgZ(23,"div",47),t.TgZ(24,"button",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().onClickForgotPassword()}),t._uU(25,"Forgot Password?"),t.qZA(),t.qZA(),t.qZA(),t._UZ(26,"hr",49),t.TgZ(27,"div",50),t.TgZ(28,"div",45),t.TgZ(29,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().onClickOtpLogin()}),t._uU(30,"Login with OTP"),t.qZA(),t.qZA(),t.TgZ(31,"div",52),t.TgZ(32,"button",53),t.YNc(33,k,2,0,"mat-icon",4),t._uU(34," Login "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.loginForm),t.xp6(4),t.Q6J("ngIf",e.alertMessage),t.xp6(6),t.ekj("is-invalid",e.loginSubmitted&&e.getLoginControls.email_id.errors),t.xp6(1),t.Q6J("ngIf",e.loginSubmitted&&e.getLoginControls.email_id.errors),t.xp6(6),t.ekj("is-invalid",e.loginSubmitted&&e.getLoginControls.password.errors),t.xp6(1),t.Q6J("ngIf",e.loginSubmitted&&e.getLoginControls.password.errors),t.xp6(15),t.Q6J("ngIf",e.isLoginLoading)}}function Y(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"h5",38),t._uU(2,"Login with OTP"),t.qZA(),t._UZ(3,"hr",7),t.TgZ(4,"div",10),t.TgZ(5,"label",61),t._uU(6,"Enter Mobile Number "),t.TgZ(7,"span",16),t._uU(8,"*"),t.qZA(),t.qZA(),t._UZ(9,"input",62,63),t.qZA(),t._UZ(11,"hr",64),t.TgZ(12,"div",1),t.TgZ(13,"div",9),t.TgZ(14,"button",51),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(10);return t.oxw().verifyMobile(r.value)}),t._uU(15,"Request Otp"),t.qZA(),t.qZA(),t.TgZ(16,"div",65),t.TgZ(17,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().loginWithEmail()}),t._uU(18,"Login With Email"),t.qZA(),t.qZA(),t.qZA(),t.BQk()}}function Q(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).validateOtp()}),t._uU(2,"Validate Otp"),t.qZA(),t.qZA()}}function E(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"h5",38),t._uU(2,"Login with OTP"),t.qZA(),t._UZ(3,"hr",7),t.TgZ(4,"div",10),t.TgZ(5,"label"),t._uU(6,"Enter Otp to verify your account "),t.TgZ(7,"span",16),t._uU(8,"*"),t.qZA(),t.qZA(),t.TgZ(9,"ngx-otp-input",66),t.NdJ("otpChange",function(r){return t.CHM(e),t.oxw().handleOtpChange(r)})("fill",function(r){return t.CHM(e),t.oxw().handleFillEvent(r)}),t.qZA(),t.TgZ(10,"small",67),t._uU(11),t.qZA(),t.TgZ(12,"h6",68),t._uU(13),t.qZA(),t.TgZ(14,"div",69),t._uU(15,"Didn't get the code? "),t.TgZ(16,"button",70),t.NdJ("click",function(){return t.CHM(e),t.oxw().resendOtp()}),t._uU(17,"Resend OTP"),t.qZA(),t.qZA(),t.qZA(),t._UZ(18,"hr",64),t.TgZ(19,"div",1),t.YNc(20,Q,3,0,"div",71),t.TgZ(21,"div",65),t.TgZ(22,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().loginWithEmail()}),t._uU(23,"Login With Email"),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(9),t.Q6J("config",e.otpInputConfig),t.xp6(2),t.hij(" A code has been sent to ",e.mobile,""),t.xp6(2),t.hij(" ",0!==e.otpExpires?"OTP Expires in "+e.otpExpires+" Seconds":"Otp Expired"," "),t.xp6(7),t.Q6J("ngIf",e.isOtp)}}function M(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"h5",38),t._uU(2,"Forgot Your Password"),t.qZA(),t._UZ(3,"hr",7),t.TgZ(4,"div",10),t.TgZ(5,"label"),t._uU(6,"Enter Email "),t.TgZ(7,"span",16),t._uU(8,"*"),t.qZA(),t.qZA(),t._UZ(9,"input",72,73),t.qZA(),t._UZ(11,"hr",64),t.TgZ(12,"div",1),t.TgZ(13,"div",9),t.TgZ(14,"button",51),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(10);return t.oxw().resetPassword(r.value)}),t._uU(15,"Reset Password"),t.qZA(),t.qZA(),t.TgZ(16,"div",65),t.TgZ(17,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().loginWithEmail()}),t._uU(18,"Login With Email"),t.qZA(),t.qZA(),t.qZA(),t.BQk()}}function P(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",74),t.TgZ(1,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw().registerSuccessMsg=""}),t.TgZ(2,"span",56),t._uU(3,"\xd7"),t.qZA(),t.TgZ(4,"span",57),t._uU(5,"Close"),t.qZA(),t.qZA(),t.TgZ(6,"p",58),t._uU(7),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(7),t.Oqu(e.registerSuccessMsg)}}function D(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"First Name is Required"),t.qZA())}function W(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Only characters are allowed in first name."),t.qZA())}function G(i,n){if(1&i&&(t.TgZ(0,"div",59),t.YNc(1,D,2,0,"div",4),t.YNc(2,W,2,0,"div",4),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.firstname.errors.required),t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.firstname.errors.pattern)}}function j(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Last Name is Required"),t.qZA())}function H(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Only characters are allowed in last name."),t.qZA())}function z(i,n){if(1&i&&(t.TgZ(0,"div",59),t.YNc(1,j,2,0,"div",4),t.YNc(2,H,2,0,"div",4),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.lastname.errors.required),t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.lastname.errors.pattern)}}function $(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Email is Required"),t.qZA())}function B(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"This Email is Not Valid"),t.qZA())}function V(i,n){if(1&i&&(t.TgZ(0,"div",59),t.YNc(1,$,2,0,"div",4),t.YNc(2,B,2,0,"div",4),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.email.errors.required),t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.email.errors.pattern)}}function K(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Phone is Required"),t.qZA())}function X(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Phone No. is 10 digit"),t.qZA())}function tt(i,n){if(1&i&&(t.TgZ(0,"div",59),t.YNc(1,K,2,0,"div",4),t.YNc(2,X,2,0,"div",4),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.phone.errors.required),t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.phone.errors.pattern)}}function et(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Password is Required"),t.qZA())}function it(i,n){if(1&i&&(t.TgZ(0,"div",59),t.YNc(1,et,2,0,"div",4),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.password.errors.required)}}function ot(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Confirm Password is Required"),t.qZA())}function rt(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"Password & Confirm Password Must Match"),t.qZA())}function nt(i,n){if(1&i&&(t.TgZ(0,"div",59),t.YNc(1,ot,2,0,"div",4),t.YNc(2,rt,2,0,"div",4),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.conf_password.errors.required),t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.conf_password.errors.mustMatch)}}function st(i,n){1&i&&(t.TgZ(0,"div"),t._uU(1,"GST Number is Not Valid"),t.qZA())}function at(i,n){if(1&i&&(t.TgZ(0,"div",59),t.YNc(1,st,2,0,"div",4),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.getRegisterControls.gst.errors.pattern)}}function lt(i,n){1&i&&(t.TgZ(0,"mat-icon"),t._UZ(1,"mat-spinner",60),t.qZA())}function gt(i,n){1&i&&t._UZ(0,"img",88)}function ct(i,n){if(1&i&&t._UZ(0,"img",89),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.s9C("alt",null==e||null==e.images?null:e.images.alt),t.Q6J("src",o.imgUrl+"/medium/"+(null==e||null==e.images[0]?null:e.images[0].filename),t.LSH)}}function mt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",82),t.TgZ(1,"div",79),t.TgZ(2,"div",83),t.TgZ(3,"div",84),t.YNc(4,gt,1,0,"img",85),t.YNc(5,ct,1,2,"img",86),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",79),t._uU(9),t.qZA(),t.TgZ(10,"div",79),t._uU(11),t.qZA(),t.TgZ(12,"div",79),t.TgZ(13,"button",87),t.NdJ("click",function(){const r=t.CHM(e),s=r.$implicit,g=r.index;return t.oxw(2).removeCartItem(!1,s.id,g)}),t._uU(14,"Remove"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit;t.xp6(4),t.Q6J("ngIf",!(null!=e&&e.images)),t.xp6(1),t.Q6J("ngIf",null==e?null:e.images),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.item_quantity),t.xp6(2),t.Oqu(e.item_value)}}function dt(i,n){if(1&i&&(t.TgZ(0,"div",75),t.TgZ(1,"div",76),t.TgZ(2,"div",77),t.TgZ(3,"h6",38),t._uU(4,"Previous added items"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div",78),t.TgZ(6,"div",79),t.TgZ(7,"h6",80),t._uU(8,"Product Name"),t.qZA(),t.qZA(),t.TgZ(9,"div",79),t.TgZ(10,"h6",80),t._uU(11,"Quantity"),t.qZA(),t.qZA(),t.TgZ(12,"div",79),t.TgZ(13,"h6",80),t._uU(14,"Price"),t.qZA(),t.qZA(),t.TgZ(15,"div",79),t.TgZ(16,"h6",80),t._uU(17,"Action"),t.qZA(),t.qZA(),t.qZA(),t.YNc(18,mt,15,5,"div",81),t.qZA()),2&i){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.cartItems)}}function ut(i,n){1&i&&t._UZ(0,"img",88)}function _t(i,n){if(1&i&&t._UZ(0,"img",89),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.s9C("alt",null==e||null==e.images?null:e.images.alt),t.Q6J("src",o.imgUrl+"/medium/"+(null==e||null==e.images[0]?null:e.images[0].filename),t.LSH)}}function pt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",92),t.TgZ(1,"div",79),t.TgZ(2,"div",83),t.TgZ(3,"div",84),t.YNc(4,ut,1,0,"img",85),t.YNc(5,_t,1,2,"img",86),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",79),t._uU(9),t.qZA(),t.TgZ(10,"div",79),t._uU(11),t.qZA(),t.TgZ(12,"div",79),t.TgZ(13,"button",87),t.NdJ("click",function(){const r=t.CHM(e),s=r.$implicit,g=r.index;return t.oxw(2).removeCartItem(!0,s.id,g)}),t._uU(14,"Remove"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit;let o;t.xp6(4),t.Q6J("ngIf",!(null!=e&&e.images)),t.xp6(1),t.Q6J("ngIf",null==e?null:e.images),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.item_quantity),t.xp6(2),t.Oqu(null!==(o=e.item_value)&&void 0!==o?o:e.saleprice)}}function ft(i,n){if(1&i&&(t.TgZ(0,"div",90),t.TgZ(1,"div",76),t.TgZ(2,"div",77),t.TgZ(3,"h6",38),t._uU(4,"Recently added items"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div",78),t.TgZ(6,"div",79),t.TgZ(7,"h6",80),t._uU(8,"Product Name"),t.qZA(),t.qZA(),t.TgZ(9,"div",79),t.TgZ(10,"h6",80),t._uU(11,"Quantity"),t.qZA(),t.qZA(),t.TgZ(12,"div",79),t.TgZ(13,"h6",80),t._uU(14,"Price"),t.qZA(),t.qZA(),t.TgZ(15,"div",79),t.TgZ(16,"h6",80),t._uU(17,"Action"),t.qZA(),t.qZA(),t.qZA(),t.YNc(18,pt,15,5,"div",91),t.qZA()),2&i){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.cartItems)}}function Zt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",93),t.TgZ(1,"div",52),t.TgZ(2,"button",51),t.NdJ("click",function(){return t.CHM(e),t.oxw().keepInCart()}),t._uU(3,"Keep in cart"),t.qZA(),t.qZA(),t.qZA()}}const vt=function(){return{width:"50vw"}},ht=[{path:"",component:(()=>{class i{constructor(e,o,r,s,g,m,bt,qt,xt){this.commonService=e,this.authService=o,this.fb=r,this.router=s,this.route=g,this.alertService=m,this.cartService=bt,this.messageService=qt,this.storageService=xt,this.imgUrl=u.N.imgUrl,this.registerSuccessMsg="",this.isLoading=!1,this.isLoginLoading=!1,this.loginSubmitted=!1,this.registerSubmitted=!1,this.isLoginWithOtpForm=!1,this.isForgotPasswordForm=!1,this.isOtp=!1,this.otpExpires=30,this.otpInputConfig={otpLength:6,autofocus:!0,classList:{inputBox:"my-super-box-class",input:"my-super-class",inputFilled:"my-super-filled-class",inputDisabled:"my-super-disable-class",inputSuccess:"my-super-success-class",inputError:"my-super-error-class"}},this.displayCartGuestItemsCompare=!1,this.guestCartItems=[],this.cartItems=[],this.cartConflictCount=0,this.storageService.getLocalStorageData("customer_data")&&this.router.navigate(["/account"])}get getLoginControls(){return this.loginForm.controls}get getRegisterControls(){return this.registerForm.controls}get mobile(){return this.storageService.getLocalStorageData("mobile")||null}ngOnInit(){this.commonService.baseUrls$.subscribe(r=>{var s,g;this.imgUrl=(null===(s=null==r?void 0:r.asset_url)||void 0===s?void 0:s.s3_link)||(null===(g=null==r?void 0:r.asset_url)||void 0===g?void 0:g.fallback)||u.N.imgUrl},()=>{this.imgUrl=u.N.imgUrl}),this.loginForm=this.fb.group({email_id:["",[l.kI.required,l.kI.pattern("[A-Za-z0-9._%-]+@[A-Za-z0-9._%-]+\\.[a-z]{2,3}")]],password:["",[l.kI.required]]});const e={validators:(0,Z.Y)("password","conf_password")};this.registerForm=this.fb.group({company:[""],firstname:["",[l.kI.required,l.kI.pattern(/^[^-\s][a-zA-Z0-9_\s-]+$/)]],lastname:["",[l.kI.required,l.kI.pattern(/^[^-\s][a-zA-Z0-9_\s-]+$/)]],email:["",[l.kI.required,l.kI.pattern("[A-Za-z0-9._%-]+@[A-Za-z0-9._%-]+\\.[a-z]{2,3}")]],phone:["",[l.kI.required,l.kI.pattern(/^[0-9]{10}$/)]],gst:["",[l.kI.pattern("^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$")]],email_subscribe:[!0],password:["",[l.kI.required]],conf_password:["",[l.kI.required]]},e)}onLoginFormSubmit(){this.loginSubmitted=!0,console.log("On Login Form Submitted : ",this.loginForm.value),!this.loginForm.invalid&&(this.isLoginLoading=!0,this.authService.login(this.loginForm.value.email_id,this.loginForm.value.password).subscribe(e=>{if(this.isLoginLoading=!1,this.alertMessage="",e&&!0===e.status){console.log("Login Successfully Resp : ",e),this.guestCartItems=this.storageService.getSessionStorageData("guest-cart-items");let o=[];if("allowed"===this.storageService.getLocalStorageData("guest"))if(this.guestCartItems&&this.guestCartItems.length>0&&this.guestCartItems.forEach(r=>{o.push({product_id:r.id,quantity:r.item_quantity})}),o.length>0)this.cartService.getAllCartItems().subscribe(r=>{var s;console.log("Get All Cart Items Resp : ",r),r.status&&((null===(s=null==r?void 0:r.cart_items)||void 0===s?void 0:s.length)>0?(this.cartItems=r.cart_items,this.cartItems.forEach(g=>{o.forEach(m=>{g.id===m.product_id&&(console.log("Item Matched : ",g),this.cartConflictCount+=1,this.displayCartGuestItemsCompare=!0)})})):this.displayCartGuestItemsCompare=!1)});else if(this.storageService.removeLocalStorageData("guest"),this.cartService.cartChangeDetectionSubject.next(!0),this.route.snapshot.queryParams.returnUrl){if(+this.storageService.getLocalStorageData("before-login-wishlist-add")&&this.commonService.getRequestWithToken("add_to_wishlist?product_id="+ +this.storageService.getLocalStorageData("before-login-wishlist-add")).subscribe(r=>{console.log("Wishlist Added Resp After login : ",r),(null==r?void 0:r.status)&&(this.alertService.success("Wishlist Successfully Added"),this.storageService.removeLocalStorageData("before-login-wishlist-add"))}),this.storageService.getLocalStorageData("product-id-before-login-for-add-to-cart")){let r={product_id:this.storageService.getLocalStorageData("product-id-before-login-for-add-to-cart"),quantity:1};console.log("Before login payload : ",r),this.cartService.addToCart(r).subscribe(s=>{console.log("Add to Cart Resp After Login : ",s),s.status&&(this.storageService.removeLocalStorageData("product-id-before-login-for-add-to-cart"),this.alertService.success("Product Added to Cart Successfully"))})}this.router.navigate([this.route.snapshot.queryParams.returnUrl])}else this.router.navigate(["/account"]);else if(this.storageService.removeLocalStorageData("guest"),this.cartService.cartChangeDetectionSubject.next(!0),this.route.snapshot.queryParams.returnUrl){if(+this.storageService.getLocalStorageData("before-login-wishlist-add")&&this.commonService.getRequestWithToken("add_to_wishlist?product_id="+ +this.storageService.getLocalStorageData("before-login-wishlist-add")).subscribe(r=>{console.log("Wishlist Added Resp After login : ",r),(null==r?void 0:r.status)&&(this.alertService.success("Wishlist Successfully Added"),this.storageService.removeLocalStorageData("before-login-wishlist-add"))}),this.storageService.getLocalStorageData("product-id-before-login-for-add-to-cart")){let r={product_id:this.storageService.getLocalStorageData("product-id-before-login-for-add-to-cart"),quantity:1};console.log("Before login payload : ",r),this.cartService.addToCart(r).subscribe(s=>{console.log("Add to Cart Resp After Login : ",s),s.status&&(this.storageService.removeLocalStorageData("product-id-before-login-for-add-to-cart"),this.alertService.success("Product Added to Cart Successfully"))})}this.router.navigate([this.route.snapshot.queryParams.returnUrl])}else this.router.navigate(["/account"])}else this.alertMessage=e.message}))}removeCartItem(e,o,r){if(this.cartConflictCount-=1,e){const s=this.guestCartItems.findIndex(g=>g.id===o);console.log("Guest Item Index for Remove : ",s),this.guestCartItems.splice(s,1),this.storageService.setSessionStorageData("guest-cart-items",this.guestCartItems),console.log("Guest Cart Items After Removed : ",this.guestCartItems),this.cartService.cartChangeDetectionSubject.next(!0),this.messageService.add({severity:"success",detail:"Item Removed Successfully"}),0===this.cartConflictCount&&(this.displayCartGuestItemsCompare=!1,this.router.navigate(["/account"]))}else e||(this.cartItems.splice(r,1),this.cartService.cartChangeDetectionSubject.next(!0),this.cartService.removeFromCart(o).subscribe(s=>{console.log("Remove From Cart Resp : ",s),this.messageService.add({severity:"success",detail:s.message})}),0===this.cartConflictCount&&(this.displayCartGuestItemsCompare=!1,this.router.navigate(["/account"])));0===this.cartConflictCount&&this.guestCartItems&&this.guestCartItems.length>0&&(this.saveGuestCartToCustomer(),console.log("Save Guest Cart To Customer : ",this.guestCartItems),this.displayCartGuestItemsCompare=!1,this.router.navigate(["/account"]))}keepInCart(){this.saveGuestCartToCustomer()}saveGuestCartToCustomer(){let e=[];this.guestCartItems&&this.guestCartItems.length>0&&this.guestCartItems.forEach(o=>{e.push({product_id:o.id,quantity:o.item_quantity})}),this.cartService.patchRequestWithToken("customer/save-guest-cart",{product_details:e}).pipe((0,v.U)(o=>o[0])).subscribe(o=>{console.log("Guest Attached to Customer Resp : ",o),!0===o.status&&(this.storageService.removeSessionStorageData("guest-cart-items"),this.displayCartGuestItemsCompare=!1,this.messageService.add({severity:"success",detail:"Cart Items Merged Successfully"}),this.cartService.cartChangeDetectionSubject.next(!0),this.router.navigate(["/account"]))})}onRegisterFormSubmit(){console.log("On Register Form Submitted : ",this.registerForm.value),this.registerSubmitted=!0,!this.registerForm.invalid&&(this.isLoading=!0,this.commonService.postRequest("register",this.registerForm.value).pipe((0,h.x)(()=>{this.isLoading=!1})).subscribe(e=>{console.log("Register Resp : ",e),this.registerSuccessMsg="",e.status?(this.registerSubmitted=!1,this.registerForm.reset(),this.registerSuccessMsg="Successfully Registered. Please Login to Continue."):this.messageService.add({severity:"error",detail:e.message})}))}onClickOtpLogin(){this.isLoginWithOtpForm=!this.isLoginWithOtpForm}loginWithEmail(){console.log("On Click Login With Email : "),this.isLoginWithOtpForm=!1,this.isForgotPasswordForm=!1}verifyMobile(e){console.log("Mobile No : ",e),this.storageService.setLocalStorageData("mobile",e),this.commonService.getData(`login_with_otp?phone=${e}`).subscribe(o=>{console.log("Login With OTP Resp : ",o),o.status?(this.isOtp=!0,setInterval(()=>{this.otpExpires>0&&(this.otpExpires=--this.otpExpires)},1e3)):(o.Error&&d().fire("Error!",o.Error,"error"),o.response&&d().fire("Warning!",o.response,"warning"))})}onClickForgotPassword(){this.isLoginWithOtpForm=!1,this.isForgotPasswordForm=!0}resetPassword(e){e&&(console.log("Reset Password Email : ",e),this.commonService.getData(`forgot_password?email=${e}`).subscribe(o=>{!0===o.status?(this.messageService.add({severity:"success",detail:o.message}),this.isForgotPasswordForm=!1):this.messageService.add({severity:"error",detail:o.message})}))}handleOtpChange(e){}handleFillEvent(e){this.isOtpValue=+e,console.log("Filled OTP : ",this.isOtpValue)}validateOtp(){let e={phone:this.storageService.getLocalStorageData("mobile"),otp:this.isOtpValue};this.commonService.postRequest("verify_login_otp",e).subscribe(o=>{console.log("OTP Validate Resp : ",o),o&&o.status?(this.storageService.removeLocalStorageData("mobile"),this.storageService.setLocalStorageData("customer_data",o.data),this.storageService.setLocalStorageData("customer_token",o.data.token),this.router.navigate(["/account"])):d().fire({title:"Error!",text:o.message,icon:"error"})})}resendOtp(){console.log("Resend Otp : ",this.storageService.getLocalStorageData("mobile"))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.v),t.Y36(A.e),t.Y36(l.qu),t.Y36(c.F0),t.Y36(c.gz),t.Y36(b.c),t.Y36(q.N),t.Y36(p.ez),t.Y36(x.V))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-login"]],decls:88,vars:42,consts:[[1,"container","py-4"],[1,"row"],[1,"col-sm-5","border-right"],[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[1,"col-sm-7"],[3,"formGroup","ngSubmit"],[1,"mt-0"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],[1,"col-sm"],[1,"form-group"],["for","company"],["type","text","id","company","formControlName","company","name","company",1,"form-control","form-control-sm"],[1,"form-row"],[1,"col-sm-6"],["for","firstname"],[1,"req"],["type","text","id","firstname","formControlName","firstname","name","firstname",1,"form-control","form-control-sm"],["class","invalid-feedback",4,"ngIf"],["for","lastname"],["type","text","id","lastname","formControlName","lastname","name","lastname",1,"form-control","form-control-sm"],["for","email"],["type","email","id","email","formControlName","email","name","email",1,"form-control","form-control-sm"],["for","phone"],["type","text","id","phone","formControlName","phone","name","phone",1,"form-control","form-control-sm"],["type","password","formControlName","password","name","password",1,"form-control","form-control-sm"],["for","conf_password"],["type","password","id","conf_password","formControlName","conf_password","name","conf_password",1,"form-control","form-control-sm"],["type","text","formControlName","gst","name","gst",1,"form-control","form-control-sm"],[1,"custom-checkbox","custom-control"],["type","checkbox","formControlName","email_subscribe","name","email_subscribe","id","subscribe_email","checked","checked",1,"custom-control-input"],["for","subscribe_email",1,"custom-control-label"],[1,"my-2"],["type","submit",1,"btn","btn-primary","float-right",3,"disabled"],["header","We have found items that were added earlier.",3,"visible","modal","responsive","baseZIndex","closable","draggable","resizable","visibleChange"],["class","container-fluid mb-3",4,"ngIf"],["class","container-fluid",4,"ngIf"],["pTemplate","footer"],[1,"font-regular"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["for","email_id"],["type","email","formControlName","email_id","name","email_id","id","email_id",1,"form-control","form-control-sm"],["for","password"],["type","password","formControlName","password","name","password","id","password",1,"form-control","form-control-sm"],[1,"row","mt-3"],[1,"col"],["routerLink","/",1,"btn-link","btn-link-primary"],[1,"col-auto","text-right"],["type","button",1,"btn-link","btn-link-primary",3,"click"],[1,"mt-1"],[1,"row","mb-4"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-auto"],["type","submit",1,"btn","btn-primary"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"sr-only"],[1,"m-0","text-capitalize"],[1,"invalid-feedback"],["diameter","15"],["for","mobile_no"],["type","text","name","mobile_no","id","mobile_no",1,"form-control","form-control-sm"],["mobileNumber",""],[1,"my-3"],[1,"col-sm-auto"],[3,"config","otpChange","fill"],[1,"d-block","mb-2"],[1,"heading-sm","my-2","font-weight-normal","font-italic","text-danger"],[1,"d-flex","align-items-end"],["type","button",1,"btn-link","btn-link-primary","ml-2",3,"click"],["class","col-sm",4,"ngIf"],["type","text","name","email",1,"form-control","form-control-sm"],["email",""],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"container-fluid","mb-3"],[1,"row","border-bottom","mb-2"],[1,"col-sm-12"],[1,"row","pb-2","border-bottom"],[1,"col-sm-3"],[1,"m-0","heading-sm"],["class","row align-items-center border-bottom py-2",4,"ngFor","ngForOf"],[1,"row","align-items-center","border-bottom","py-2"],[1,"d-flex","align-items-center"],[1,"img-box-sm","mr-2"],["class","img-fluid","src","assets/img/not-found/no-image-found.png","alt"," ",4,"ngIf"],["class","img-fluid",3,"src","alt",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-danger",3,"click"],["src","assets/img/not-found/no-image-found.png","alt"," ",1,"img-fluid"],[1,"img-fluid",3,"src","alt"],[1,"container-fluid"],["class","row align-items-center py-2 border-bottom",4,"ngFor","ngForOf"],[1,"row","align-items-center","py-2","border-bottom"],[1,"row","justify-content-center"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.YNc(3,O,35,9,"form",3),t.YNc(4,Y,19,0,"ng-container",4),t.YNc(5,E,24,4,"ng-container",4),t.YNc(6,M,19,0,"ng-container",4),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"form",6),t.NdJ("ngSubmit",function(){return o.onRegisterFormSubmit()}),t.TgZ(9,"h5"),t._uU(10,"Create New Account"),t.qZA(),t._UZ(11,"hr",7),t.YNc(12,P,8,1,"div",8),t.TgZ(13,"div",1),t.TgZ(14,"div",9),t.TgZ(15,"div",10),t.TgZ(16,"label",11),t._uU(17,"Company"),t.qZA(),t._UZ(18,"input",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t.TgZ(21,"div",10),t.TgZ(22,"label",15),t._uU(23,"First Name "),t.TgZ(24,"span",16),t._uU(25,"*"),t.qZA(),t.qZA(),t._UZ(26,"input",17),t.YNc(27,G,3,2,"div",18),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"div",10),t.TgZ(30,"label",19),t._uU(31,"Last Name "),t.TgZ(32,"span",16),t._uU(33,"*"),t.qZA(),t.qZA(),t._UZ(34,"input",20),t.YNc(35,z,3,2,"div",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",13),t.TgZ(37,"div",14),t.TgZ(38,"div",10),t.TgZ(39,"label",21),t._uU(40,"Email "),t.TgZ(41,"span",16),t._uU(42,"*"),t.qZA(),t.qZA(),t._UZ(43,"input",22),t.YNc(44,V,3,2,"div",18),t.qZA(),t.qZA(),t.TgZ(45,"div",14),t.TgZ(46,"div",10),t.TgZ(47,"label",23),t._uU(48,"Phone "),t.TgZ(49,"span",16),t._uU(50,"*"),t.qZA(),t.qZA(),t._UZ(51,"input",24),t.YNc(52,tt,3,2,"div",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"div",13),t.TgZ(54,"div",14),t.TgZ(55,"div",10),t.TgZ(56,"label"),t._uU(57,"Password "),t.TgZ(58,"span",16),t._uU(59,"*"),t.qZA(),t.qZA(),t._UZ(60,"input",25),t.YNc(61,it,2,1,"div",18),t.qZA(),t.qZA(),t.TgZ(62,"div",14),t.TgZ(63,"div",10),t.TgZ(64,"label",26),t._uU(65,"Confirm Password "),t.TgZ(66,"span",16),t._uU(67,"*"),t.qZA(),t.qZA(),t._UZ(68,"input",27),t.YNc(69,nt,3,2,"div",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(70,"div",10),t.TgZ(71,"label"),t._uU(72,"GST IN."),t.qZA(),t._UZ(73,"input",28),t.YNc(74,at,2,1,"div",18),t.qZA(),t.TgZ(75,"div",10),t.TgZ(76,"div",29),t._UZ(77,"input",30),t.TgZ(78,"label",31),t._uU(79,"Subscribe to our email list"),t.qZA(),t.qZA(),t.qZA(),t._UZ(80,"hr",32),t.TgZ(81,"button",33),t.YNc(82,lt,2,0,"mat-icon",4),t._uU(83),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(84,"p-dialog",34),t.NdJ("visibleChange",function(s){return o.displayCartGuestItemsCompare=s}),t.YNc(85,dt,19,1,"div",35),t.YNc(86,ft,19,1,"div",36),t.YNc(87,Zt,4,0,"ng-template",37),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",!o.isLoginWithOtpForm&&!o.isForgotPasswordForm),t.xp6(1),t.Q6J("ngIf",o.isLoginWithOtpForm&&!o.isOtp),t.xp6(1),t.Q6J("ngIf",o.isLoginWithOtpForm&&o.isOtp),t.xp6(1),t.Q6J("ngIf",o.isForgotPasswordForm),t.xp6(2),t.Q6J("formGroup",o.registerForm),t.xp6(4),t.Q6J("ngIf",o.registerSuccessMsg),t.xp6(14),t.ekj("is-invalid",o.registerSubmitted&&o.getRegisterControls.firstname.errors),t.xp6(1),t.Q6J("ngIf",o.registerSubmitted&&o.getRegisterControls.firstname.errors),t.xp6(7),t.ekj("is-invalid",o.registerSubmitted&&o.getRegisterControls.lastname.errors),t.xp6(1),t.Q6J("ngIf",o.registerSubmitted&&o.getRegisterControls.lastname.errors),t.xp6(8),t.ekj("is-invalid",o.registerSubmitted&&o.getRegisterControls.email.errors),t.xp6(1),t.Q6J("ngIf",o.registerSubmitted&&o.getRegisterControls.email.errors),t.xp6(7),t.ekj("is-invalid",o.registerSubmitted&&o.getRegisterControls.phone.errors),t.xp6(1),t.Q6J("ngIf",o.registerSubmitted&&o.getRegisterControls.phone.errors),t.xp6(8),t.ekj("is-invalid",o.registerSubmitted&&o.getRegisterControls.password.errors),t.xp6(1),t.Q6J("ngIf",o.registerSubmitted&&o.getRegisterControls.password.errors),t.xp6(7),t.ekj("is-invalid",o.registerSubmitted&&o.getRegisterControls.conf_password.errors),t.xp6(1),t.Q6J("ngIf",o.registerSubmitted&&o.getRegisterControls.conf_password.errors),t.xp6(4),t.ekj("is-invalid",o.registerSubmitted&&o.getRegisterControls.gst.errors),t.xp6(1),t.Q6J("ngIf",o.registerSubmitted&&o.getRegisterControls.gst.errors),t.xp6(7),t.Q6J("disabled",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.hij(" Register ",o.isLoading?"":"Now"," "),t.xp6(1),t.Akn(t.DdM(41,vt)),t.Q6J("visible",o.displayCartGuestItemsCompare)("modal",!0)("responsive",!0)("baseZIndex",1e4)("closable",!0)("draggable",!1)("resizable",!1),t.xp6(1),t.Q6J("ngIf",o.cartItems&&o.cartItems.length>0),t.xp6(1),t.Q6J("ngIf",o.guestCartItems&&o.guestCartItems.length>0))},directives:[f.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.Wl,S.V,p.jx,c.yS,L.Hw,U.$g,I.lH,f.sg],styles:[""]}),i})()}];let Tt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.Bz.forChild(ht)],c.Bz]}),i})();var Ct=a(5401);let At=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Tt,Ct.m]]}),i})()}}]);