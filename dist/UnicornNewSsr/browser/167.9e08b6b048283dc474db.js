"use strict";(self.webpackChunkunicorn_new_ssr=self.webpackChunkunicorn_new_ssr||[]).push([[167],{8167:(J,p,a)=>{a.r(p),a.d(p,{FindStoreModule:()=>N});var u=a(633),v=a(5319),S=function o(i,e){if(i===e)return!0;if(i&&e&&"object"==typeof i&&"object"==typeof e){if(i.constructor!==e.constructor)return!1;var s,n,r;if(Array.isArray(i)){if((s=i.length)!=e.length)return!1;for(n=s;0!=n--;)if(!o(i[n],e[n]))return!1;return!0}if(i.constructor===RegExp)return i.source===e.source&&i.flags===e.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===e.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===e.toString();if((s=(r=Object.keys(i)).length)!==Object.keys(e).length)return!1;for(n=s;0!=n--;)if(!Object.prototype.hasOwnProperty.call(e,r[n]))return!1;for(n=s;0!=n--;){var l=r[n];if(!o(i[l],e[l]))return!1}return!0}return i!=i&&e!=e};const g="__googleMapsScriptId";var c=(()=>{return(o=c||(c={}))[o.INITIALIZED=0]="INITIALIZED",o[o.LOADING=1]="LOADING",o[o.SUCCESS=2]="SUCCESS",o[o.FAILURE=3]="FAILURE",c;var o})();class h{constructor({apiKey:i,authReferrerPolicy:e,channel:s,client:n,id:r=g,language:l,libraries:d=[],mapIds:L,nonce:M,region:k,retries:R=3,url:$="https://maps.googleapis.com/maps/api/js",version:q}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=i,this.authReferrerPolicy=e,this.channel=s,this.client=n,this.id=r||g,this.language=l,this.libraries=d,this.mapIds=L,this.nonce=M,this.region=k,this.retries=R,this.url=$,this.version=q,h.instance){if(!S(this.options,h.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(h.instance.options)}`);return h.instance}h.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?c.FAILURE:this.done?c.SUCCESS:this.loading?c.LOADING:c.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let i=this.url;return i+=`?callback=${this.CALLBACK}`,this.apiKey&&(i+=`&key=${this.apiKey}`),this.channel&&(i+=`&channel=${this.channel}`),this.client&&(i+=`&client=${this.client}`),this.libraries.length>0&&(i+=`&libraries=${this.libraries.join(",")}`),this.language&&(i+=`&language=${this.language}`),this.region&&(i+=`&region=${this.region}`),this.version&&(i+=`&v=${this.version}`),this.mapIds&&(i+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(i+=`&auth_referrer_policy=${this.authReferrerPolicy}`),i}deleteScript(){const i=document.getElementById(this.id);i&&i.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((i,e)=>{this.loadCallback(s=>{s?e(s.error):i(window.google)})})}loadCallback(i){this.callbacks.push(i),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const i=this.createUrl(),e=document.createElement("script");e.id=this.id,e.type="text/javascript",e.src=i,e.onerror=this.loadErrorCallback.bind(this),e.defer=!0,e.async=!0,this.nonce&&(e.nonce=this.nonce),document.head.appendChild(e)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(i){if(this.errors.push(i),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)}else this.onerrorEvent=i,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(i=>{i(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var t=a(7716),y=a(690),A=a(9075),Z=a(1630),C=a(3376),b=a(6228),f=a(3679),m=a(8583);function T(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.state),t.xp6(1),t.Oqu(e.state)}}function I(o,i){if(1&o&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.city),t.xp6(1),t.Oqu(e.city)}}function F(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",19),t.TgZ(2,"h6",20),t._uU(3),t.qZA(),t.TgZ(4,"address",21),t._uU(5),t.qZA(),t.TgZ(6,"h6",22),t._uU(7),t.qZA(),t.TgZ(8,"button",23),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).viewLocation(r.src)}),t._uU(9,"View Location"),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=i.$implicit;t.xp6(3),t.Oqu(e.store_name),t.xp6(2),t.hij(" ",e.store_address," "),t.xp6(2),t.hij("Phone No. - ",e.phone,"")}}function w(o,i){if(1&o&&(t.TgZ(0,"div",15),t.TgZ(1,"h4",16),t._uU(2,"Store Address"),t.qZA(),t._UZ(3,"hr",17),t.TgZ(4,"div",2),t.YNc(5,F,10,3,"ng-container",18),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.storesHolder)}}function O(o,i){1&o&&t._UZ(0,"div",24)}function _(o,i){if(1&o&&(t.TgZ(0,"div",25),t._UZ(1,"iframe",26),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("src",e.mapSrc,t.uOi)}}const x=[{path:"",component:(()=>{class o{constructor(e,s,n,r,l){this.commonService=e,this.sanitizer=s,this.dataLayerService=n,this.platformService=r,this.seoService=l,this.subscription=new v.w,this.storesHolder=[],this.locations=[],this.isViewLocation=!1,this.stateHolder=[],this.cityHolder=[]}ngOnInit(){this.getStatesOfAllStores(),this.fireGA4EventOnPageLoad()}fireGA4EventOnPageLoad(){this.dataLayerService.push({event:"Pageview"})}getStatesOfAllStores(){var e;this.subscription.add(null===(e=this.commonService.postRequest("stores/get_all_states",{}))||void 0===e?void 0:e.subscribe(s=>{s&&(this.stateHolder=s.data)}))}getCitiesOfStateOfStore(e){this.commonService.postRequest("stores/get_all_states",{state:e}).subscribe(s=>{s&&(this.cityHolder=s.data)})}onStateChange(e){this.state=e.target[e.target.options.selectedIndex].text,this.storesHolder=[],this.locations=[],this.getCitiesOfStateOfStore(this.state)}onCityChange(e){this.city=e.target[e.target.options.selectedIndex].text,this.subscription=this.commonService.getData(`store?state=${this.state}&city=${this.city}`).subscribe(s=>{s&&(this.storesHolder=s,this.locations=[],this.storesHolder.forEach(n=>{this.locations.push({latitude:n.latitude,longitude:n.longitude,locationName:n.store_name})}),this.loadMap())})}viewLocation(e){this.isViewLocation=!0,this.mapSrc=this.sanitizer.bypassSecurityTrustResourceUrl(e)}ngAfterViewInit(){setTimeout(()=>{this.seoService.setTitle("Find Store"),this.seoService.setMetaTags([{name:"description",content:"Find the nearest Unicorn Store near you. Visit the store to explore the latest Apple products and accessories."},{name:"keywords",content:"Apple Store, Apple Premium Reseller, Apple products, Apple accessories, Apple Authorized Service Provider, Apple Store near me"}])}),this.platformService.isBrowser()&&this.loadMap()}loadMap(){new h({apiKey:"AIzaSyAYlBRLJPLiJjprCobQwdGZ0u-CdDHZxYQ"}).load().then(()=>{const s=new google.maps.Map(document.getElementById("map"),{center:{lat:0,lng:0},zoom:2}),n=new google.maps.LatLngBounds;for(const r of this.locations){const l={lat:Number(r.latitude),lng:Number(r.longitude)},d=new google.maps.Marker({position:l,title:r.locationName});d.setMap(s),n.extend(d.getPosition())}s.fitBounds(n),s.panToBounds(n)}).catch(s=>{console.error("Error loading Google Maps API:",s)})}ngOnDestroy(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.v),t.Y36(A.H7),t.Y36(Z.n),t.Y36(C.m),t.Y36(b.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-find-store"]],decls:21,vars:5,consts:[[1,"container","py-3"],[1,"my-2"],[1,"row"],[1,"col-12","col-sm"],[1,"row","mb-3"],[1,"col-sm-6"],["name","state","id","state",1,"custom-select","custom-select-sm",3,"change"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["name","city",1,"custom-select","custom-select-sm",3,"change"],["class","address-box",4,"ngIf"],[1,"col-12","col-sm-6"],["class","map","id","map",4,"ngIf"],["class","iframe-map",4,"ngIf"],[3,"value"],[1,"address-box"],[1,"heading","mb-0"],[1,"mb-2","mt-1"],[4,"ngFor","ngForOf"],[1,"col-sm-6","mb-4"],[1,"heading-md"],[1,"mb-1"],[1,"heading-link-sm","mb-1"],["type","button",1,"btn-link",3,"click"],["id","map",1,"map"],[1,"iframe-map"],["frameborder","0",3,"src"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h4"),t._uU(2,"Store Locator"),t.qZA(),t._UZ(3,"hr",1),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"select",6),t.NdJ("change",function(r){return s.onStateChange(r)}),t.TgZ(9,"option",7),t._uU(10,"Select State"),t.qZA(),t.YNc(11,T,2,2,"option",8),t.qZA(),t.qZA(),t.TgZ(12,"div",5),t.TgZ(13,"select",9),t.NdJ("change",function(r){return s.onCityChange(r)}),t.TgZ(14,"option",7),t._uU(15,"Select City"),t.qZA(),t.YNc(16,I,2,2,"option",8),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,w,6,1,"div",10),t.qZA(),t.TgZ(18,"div",11),t.YNc(19,O,1,0,"div",12),t.YNc(20,_,2,1,"div",13),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(11),t.Q6J("ngForOf",s.stateHolder),t.xp6(5),t.Q6J("ngForOf",s.cityHolder),t.xp6(1),t.Q6J("ngIf",s.storesHolder.length>0),t.xp6(2),t.Q6J("ngIf",!s.isViewLocation),t.xp6(1),t.Q6J("ngIf",s.isViewLocation))},directives:[f.YN,f.Kr,m.sg,m.O5],styles:[""]}),o})()}];let E=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild(x)],u.Bz]}),o})();var U=a(4834);let N=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[E,U.m]]}),o})()}}]);