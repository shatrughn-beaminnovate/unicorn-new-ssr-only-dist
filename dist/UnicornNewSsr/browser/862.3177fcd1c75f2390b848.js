"use strict";(self.webpackChunkunicorn_new_ssr=self.webpackChunkunicorn_new_ssr||[]).push([[862],{862:(Y,_,s)=>{s.r(_),s.d(_,{CategoriesModule:()=>I});var d=s(633),f=s(5319),m=s(2340),v=s(8002),t=s(7716),b=s(690),C=s(9783),x=s(1630),Z=s(2323),y=s(6228),h=s(8583),T=s(3290),p=s(3679),A=s(4385),M=s(5889);function S(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearAllFilters()}),t._uU(1,"CLEAR ALL"),t.qZA()}}function F(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).clearPriceFilters()}),t._uU(1,"CLEAR"),t.qZA()}}function q(r,n){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",33),t.TgZ(2,"input",34),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.selected=o})("change",function(){return t.CHM(e),t.oxw(3).onAttributesSelectedForFilters()}),t.qZA(),t.TgZ(3,"label",35),t._uU(4),t.qZA(),t.qZA(),t.BQk()}if(2&r){const e=n.$implicit;t.xp6(2),t.Q6J("ngModel",e.selected)("id",e.id),t.xp6(1),t.uIk("for",e.id),t.xp6(1),t.Oqu(e.option_name)}}function U(r,n){if(1&r&&(t.ynx(0),t.TgZ(1,"div",27),t.TgZ(2,"button",28),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._UZ(6,"i",29),t.qZA(),t.qZA(),t.TgZ(7,"div",30),t.TgZ(8,"div",31),t.YNc(9,q,5,4,"ng-container",32),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&r){const e=n.$implicit,i=n.index;t.xp6(2),t.uIk("data-target","#collapsible_"+i),t.xp6(2),t.Oqu(e.attribute_label),t.xp6(3),t.MGl("id","collapsible_",i,""),t.xp6(2),t.Q6J("ngForOf",e.attribute_options)}}function L(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",7),t.TgZ(1,"div",8),t.TgZ(2,"div",9),t.TgZ(3,"h4",10),t._uU(4,"Filters"),t.qZA(),t.YNc(5,S,2,0,"button",11),t.qZA(),t.TgZ(6,"div",12),t.TgZ(7,"div",13),t.TgZ(8,"div",14),t.TgZ(9,"h5",15),t._uU(10,"PRICE "),t.qZA(),t.YNc(11,F,2,0,"button",11),t.qZA(),t.TgZ(12,"ngx-slider",16),t.NdJ("valueChange",function(o){return t.CHM(e),t.oxw().minValue=o})("mouseup",function(){return t.CHM(e),t.oxw().onPriceChanged()})("highValueChange",function(o){return t.CHM(e),t.oxw().maxValue=o}),t.qZA(),t.TgZ(13,"div",17),t.TgZ(14,"div",18),t.TgZ(15,"label"),t._uU(16,"Min Price"),t.qZA(),t.TgZ(17,"div",19),t.TgZ(18,"div",20),t.TgZ(19,"span",21),t._UZ(20,"i",22),t.qZA(),t.qZA(),t.TgZ(21,"input",23),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().minValue=o})("change",function(){return t.CHM(e),t.oxw().onPriceChanged()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"span",24),t.TgZ(23,"label"),t._uU(24,"\xa0"),t.qZA(),t._UZ(25,"br"),t._uU(26,"to"),t.qZA(),t.TgZ(27,"div",18),t.TgZ(28,"label"),t._uU(29,"Max Price"),t.qZA(),t.TgZ(30,"div",19),t.TgZ(31,"div",20),t.TgZ(32,"span",21),t._UZ(33,"i",22),t.qZA(),t.qZA(),t.TgZ(34,"input",23),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().maxValue=o})("change",function(){return t.CHM(e),t.oxw().onPriceChanged()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(35,U,10,4,"ng-container",25),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.isFilterApplied),t.xp6(6),t.Q6J("ngIf",e.isPriceFilterApplied),t.xp6(1),t.Q6J("value",e.minValue)("highValue",e.maxValue)("options",e.options),t.xp6(9),t.Q6J("ngModel",e.minValue),t.xp6(13),t.Q6J("ngModel",e.maxValue),t.xp6(1),t.Q6J("ngForOf",e.attributesHolder)("ngForTrackBy",e.trackByFunc)}}const w=function(r){return["/type",r]};function H(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().setMetaData(o)}),t._UZ(1,"app-image-loader",39),t.TgZ(2,"h3",40),t._uU(3),t.qZA(),t._UZ(4,"app-price",41),t.qZA()}if(2&r){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("routerLink",t.VKq(5,w,e.slug)),t.xp6(1),t.Q6J("imageUrl",i.imgUrl+"/medium/"+e.image)("imageLoading",!0),t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("price",e.min_saleprice)}}const J=function(r){return["/accessories",r]};function P(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().setMetaData(o)}),t._UZ(1,"app-image-loader",39),t.TgZ(2,"h3",40),t._uU(3),t.qZA(),t._UZ(4,"app-price",41),t.qZA()}if(2&r){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("routerLink",t.VKq(5,J,e.slug)),t.xp6(1),t.Q6J("imageUrl",i.imgUrl+"/medium/"+e.image)("imageLoading",!0),t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("price",e.min_saleprice)}}const O=function(r){return["/category",r]};function k(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().setMetaData(o)}),t._UZ(1,"app-image-loader",39),t.TgZ(2,"h3",40),t._uU(3),t.qZA(),t._UZ(4,"app-price",41),t.qZA()}if(2&r){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("routerLink",t.VKq(5,O,e.slug)),t.xp6(1),t.Q6J("imageUrl",i.imgUrl+"/medium/"+e.image)("imageLoading",!0),t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("price",e.min_saleprice)}}function N(r,n){if(1&r&&(t.TgZ(0,"div",36),t.YNc(1,H,5,7,"a",37),t.YNc(2,P,5,7,"a",37),t.YNc(3,k,5,7,"a",37),t.qZA()),2&r){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",e.childrens&&0===e.childrens.length&&"configurable"===e.category_type),t.xp6(1),t.Q6J("ngIf",e.childrens&&0===e.childrens.length&&"simple"===e.category_type),t.xp6(1),t.Q6J("ngIf",e.childrens&&e.childrens.length>0)}}function V(r,n){1&r&&(t.TgZ(0,"div",42),t.TgZ(1,"h4",43),t._uU(2,"Categories Not Available"),t.qZA(),t.qZA())}const D=[{path:":slug",component:(()=>{class r{constructor(e,i,o,a,l,g,u,c){this.route=e,this.router=i,this.commonService=o,this.cd=a,this.messageService=l,this.dataLayerService=g,this.storageService=u,this.seoService=c,this.imgUrl=m.N.imgUrl,this.categoryAttrHolder=[],this.attributesHolder=[],this.isPriceFilterApplied=!1,this.isFilterApplied=!1,this.minValue=0,this.maxValue=5e6,this.options={floor:0,ceil:5e5},this.subscription=f.w.EMPTY,this.sortOptions=[{label:"Name: A to Z",value:"name"},{label:"Name: Z to A",value:"!name"},{label:"Price: Low to High",value:"saleprice"},{label:"Price: High to Low",value:"!saleprice"}]}ngOnInit(){this.commonService.baseUrls$.subscribe(e=>{var i,o;this.imgUrl=(null===(i=null==e?void 0:e.asset_url)||void 0===i?void 0:i.s3_link)||(null===(o=null==e?void 0:e.asset_url)||void 0===o?void 0:o.fallback)||m.N.imgUrl},()=>{this.imgUrl=m.N.imgUrl}),this.route.paramMap.subscribe(e=>{this.getCategoryBySlug(e.params.slug)}),setTimeout(()=>{this.seoService.setTitle(this.storageService.getLocalStorageData("meta-title")),this.seoService.setMetaTags(this.storageService.getLocalStorageData("meta-tags"))},1e3)}setMetaData(e){const i=this.seoService.parseMetaTags(e.meta);this.storageService.setLocalStorageData("meta-tags",i),this.storageService.setLocalStorageData("meta-title",e.seo_title)}getCategoryBySlug(e){this.commonService.postRequestWithSlug(e,{view:"tree"}).subscribe(o=>{var a;this.categoryType=null===(a=null==o?void 0:o.category)||void 0===a?void 0:a.category_type,this.categoryAttrHolder=o,this.handleCategoryListGA4(e)})}ngAfterViewChecked(){this.cd.detectChanges()}getCategory(e){this.commonService.getRequest(`attribute/get_category/${e}`).subscribe(i=>{var o;if(window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"view_item_list",ecommerce:{value:i.data.length,items:i.data.map((a,l)=>({item_id:a.id,item_name:a.name,index:l-1}))}}),i.status){if(null!=i.attributes&&this.storageService.setLocalStorageData("attr_type",i.attributes),null===(o=null==i?void 0:i.data)||void 0===o?void 0:o.primary)return void this.router.navigate(["products",e],{replaceUrl:!0});this.categoryAttrHolder=i.data,this.handleCategoryListGA4(e)}else this.messageService.add({severity:"error",detail:i.message})})}handleCategoryListGA4(e){let i=[];this.categoryAttrHolder.forEach((o,a)=>{i.push({item_id:o.id,item_name:o.name})}),this.dataLayerService.push({event:"view_item_list",ecommerce:{item_list_id:"from_main_menu",item_list_name:"From Main Menu",items:i}})}onClickCategoryItem(e){var i;null===(i=this.commonService.getRequest(`attribute/get_category/${e}`))||void 0===i||i.subscribe(o=>{o.status?o.attributes&&o.attributes.length>0?this.router.navigate(["type",e]):"simple"===o.product_type?this.router.navigate(["accessories",e]):this.getCategory(e):this.messageService.add({severity:"error",detail:o.message})})}onAttributesSelectedForFilters(){this.attributesHolder&&this.storageService.setLocalStorageData("filterable-attributes",this.attributesHolder),this.loadData(this.defaultPaginateEvent)}onPriceChanged(){this.isPriceFilterApplied=!0,this.loadData(this.defaultPaginateEvent)}clearPriceFilters(){this.isPriceFilterApplied=!1,this.minValue=0,this.maxValue=5e6,this.loadData(this.defaultPaginateEvent)}clearAllFilters(){this.storageService.removeLocalStorageData("filterable-attributes"),this.attributesHolder.forEach((e,i)=>{e.attribute_options.forEach((o,a)=>{o.selected&&(this.attributesHolder[i].attribute_options[a].selected=!1)})}),this.clearPriceFilters()}loadData(e){this.storageService.getLocalStorageData("filterable-attributes")&&"undefined"!==this.storageService.getLocalStorageData("filterable-attributes")?this.attributesHolder=this.storageService.getLocalStorageData("filterable-attributes"):this.isFilterApplied=!1,this.defaultPaginateEvent=e;let i={limit_per_page:null==e?void 0:e.rows,order_by:null==e?void 0:e.sortField,skip:null==e?void 0:e.first,sort:null==e?void 0:e.sortOrder,filter_text:""},o=[];this.attributesHolder.forEach((a,l)=>{let g=[],u="";if(a.attribute_options.forEach(c=>{c.selected&&(this.isFilterApplied=!0,u=c.attribute_type,g.push(c.id))}),""!==u&&g.length>0){let c=o.length;0===c?o.push({attribute_type:u,attribute_options:g}):o[c-1].attribute_type===u?o[c-1].attribute_options.push(...g):o.push({attribute_type:u,attribute_options:g})}}),o.length>0&&(i.attributes=[...o]),this.isPriceFilterApplied&&(i.attributes&&i.attributes.length>0?i.attributes.push({attribute_type:"price",attribute_options:[this.minValue,this.maxValue]}):i.attributes=[{attribute_type:"price",attribute_options:[this.minValue,this.maxValue]}]),this.subscription=this.route.paramMap.subscribe(a=>{this.title=a.params.slug,this.commonService.postRequest(`attribute/get_category/products/${a.params.slug}`,i).pipe((0,v.U)(l=>(l.attributes&&l.attributes.forEach(g=>{g.attribute_options.forEach((u,c)=>{g.attribute_options[c].selected=!1})}),l))).subscribe(l=>{this.categoryTypeHolder=l.data,setTimeout(()=>{Array.isArray(l.attributes)&&this.storageService.setLocalStorageData("attr_type",l.attributes)},1e3),this.storageService.getLocalStorageData("filterable-attributes")?"undefined"!==this.storageService.getLocalStorageData("filterable-attributes")&&(this.attributesHolder=this.storageService.getLocalStorageData("filterable-attributes")):(this.attributesHolder=l.attributes,this.storageService.setLocalStorageData("filterable-attributes",l.attributes)),this.totalRecords=l.total_count})})}onSortChange(e){let i=e.value;0===i.indexOf("!")?(this.sortOrder=-1,this.sortField=i.substring(1,i.length)):(this.sortOrder=1,this.sortField=i)}ngOnDestroy(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}clearFilter(){this.defaultPaginateEvent={first:0,rows:12,sortField:void 0,sortOrder:void 0},this.sortKey="",this.loadData(this.defaultPaginateEvent)}trackByFunc(e){return e}onClickProduct(e,i){this.dataLayerService.push({ecommerce:null}),this.dataLayerService.push({event:"select_item",ecommerce:{item_list_id:i,item_list_name:i,items:[{item_id:e,item_name:i}]}})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(d.gz),t.Y36(d.F0),t.Y36(b.v),t.Y36(t.sBO),t.Y36(C.ez),t.Y36(x.n),t.Y36(Z.V),t.Y36(y.v))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-categories"]],decls:7,vars:3,consts:[[1,"container"],[1,"form-row","justify-content-center"],["class","col-sm-3 d-none",4,"ngIf"],[1,"col-sm-12"],[1,"row","pt-2","pb-3","justify-content-center","text-center"],["class","col-sm-3 cg-4",4,"ngFor","ngForOf"],["class","col-sm",4,"ngIf"],[1,"col-sm-3","d-none"],[1,"card","border-0","shadow-sm","sticky-top-filters","filters-section"],[1,"card-header","d-flex","align-items-center","justify-content-between"],[1,"heading","mb-0","mt-1"],["type","button","class","btn-link clr-btn",3,"click",4,"ngIf"],[1,"card-body"],[1,"filter-box","mb-4"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"filter-label"],[3,"value","highValue","options","valueChange","mouseup","highValueChange"],[1,"d-flex","align-items-center","justify-content-between","mt-2"],[1,"form-groups"],[1,"input-group","input-group-xs"],[1,"input-group-prepend"],[1,"input-group-text","rounded-0"],[1,"fa","fa-rupee-sign"],["type","text",1,"form-control","form-control-xs","rounded-0",3,"ngModel","ngModelChange","change"],[1,"px-2"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"btn-link","clr-btn",3,"click"],[1,"filter-box"],["type","button","data-toggle","collapse","aria-expanded","true",1,"btn-link","filter-btn"],[1,"fa","fa-angle-right","ml-2"],[1,"collapse","show",3,"id"],[1,"mb-2"],[4,"ngFor","ngForOf"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"ngModel","id","ngModelChange","change"],[1,"custom-control-label"],[1,"col-sm-3","cg-4"],["class","product-list-box",3,"routerLink","click",4,"ngIf"],[1,"product-list-box",3,"routerLink","click"],["noImageUrl","assets/img/not-found/no-image-found.png","imageContainerHeight","11rem","alt","Image Not Available",3,"imageUrl","imageLoading"],[1,"heading","mt-3","mb-2"],["priceLabel","Starting From",3,"price"],[1,"col-sm"],[1,"heading","text-danger","m-0","py-5"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,L,36,9,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.YNc(5,N,4,3,"div",5),t.YNc(6,V,3,0,"div",6),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.categoryTypeHolder),t.xp6(3),t.Q6J("ngForOf",i.categoryAttrHolder),t.xp6(1),t.Q6J("ngIf",0===(null==i.categoryTypeHolder?null:i.categoryTypeHolder.length)))},directives:[h.O5,h.sg,T.w5,p.Fj,p.JJ,p.On,p.Wl,d.yS,A.g,M.C],styles:[".filter-bg[_ngcontent-%COMP%]{background-color:#f2f2f2}.filter-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0070c9}.custom-control-label.starlight[_ngcontent-%COMP%]:before{background-color:#dcd2c9}.custom-control-label.midnight[_ngcontent-%COMP%]:before{background-color:#3c3d42}.custom-control-label.green[_ngcontent-%COMP%]:before{background-color:#496149}.custom-control-label.productred[_ngcontent-%COMP%]:before{background-color:#c33647}.col-sm-4[_ngcontent-%COMP%]:nth-child(3n){border-right:0!important}.product-list-box[_ngcontent-%COMP%]{width:100%;display:flex;background-color:#fbfbfb;border-radius:10px;padding:20px;height:100%;flex-direction:column;flex-wrap:wrap;justify-content:flex-end;align-items:center}.cg-4[_ngcontent-%COMP%]{margin-bottom:30px}"]}),r})()}];let E=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[d.Bz.forChild(D)],d.Bz]}),r})();var Q=s(8769);let I=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[E,Q.m]]}),r})()}}]);