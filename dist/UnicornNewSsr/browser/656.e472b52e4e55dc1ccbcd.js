"use strict";(self.webpackChunkunicorn_new_ssr=self.webpackChunkunicorn_new_ssr||[]).push([[656],{2429:(G,g,a)=>{a.r(g),a.d(g,{ProductsModule:()=>O});var d=a(8583),l=a(633),u=a(2340),t=a(7716),p=a(690),v=a(9075),h=a(9783),f=a(4128),x=a(263),y=a(1630),S=a(2323),T=a(6228),Z=a(3990),A=a(4385),b=a(7271),_=a(4119),P=a(89);const C=["notifyMeModal"];function I(i,n){if(1&i&&(t.TgZ(0,"div",21),t.TgZ(1,"span",22),t._UZ(2,"del",23),t.ALo(3,"priceAfterDotSmall"),t.ALo(4,"currency"),t.qZA(),t._UZ(5,"span",24),t.ALo(6,"priceAfterDotSmall"),t.ALo(7,"currency"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("innerHTML",t.lcZ(3,2,t.lcZ(4,4,e.price)),t.oJD),t.xp6(3),t.Q6J("innerHTML",t.lcZ(6,6,t.lcZ(7,8,e.saleprice)),t.oJD)}}function J(i,n){if(1&i&&(t.TgZ(0,"div",21),t._UZ(1,"span",24),t.ALo(2,"priceAfterDotSmall"),t.ALo(3,"currency"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,1,t.lcZ(3,3,e.saleprice)),t.oJD)}}function L(i,n){if(1&i&&(t.TgZ(0,"h5",25),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,(e.price-e.saleprice)/e.price*100,"1.0-0"),"% off ")}}function M(i,n){1&i&&(t.TgZ(0,"h5",26),t._uU(1,"Out of Stock"),t.qZA())}function N(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit;return t.oxw(2),t.MAs(5).show(s.id)}),t._uU(1," Notify Me "),t.qZA()}}function U(i,n){if(1&i&&t._UZ(0,"app-add-to-cart",28),2&i){const e=t.oxw(2).$implicit;t.Q6J("showRoundButton",!0)("product",e)}}function Y(i,n){1&i&&t._UZ(0,"i",32)}function w(i,n){1&i&&t._UZ(0,"i",33)}function Q(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2),c=s.$implicit,r=s.index;return t.oxw(2).wishlistToggle(c,r)}),t.YNc(1,Y,1,0,"i",30),t.YNc(2,w,1,0,"i",31),t.qZA()}if(2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!o.isWishlistAdded[e]),t.xp6(1),t.Q6J("ngIf",o.isWishlistAdded[e])}}const D=function(i){return[i]};function q(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",7),t.TgZ(1,"div",8),t.TgZ(2,"a",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw(2).setMetaData(s)}),t._UZ(3,"app-image-loader",10),t.TgZ(4,"h3",11),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"div",12),t.YNc(7,I,8,10,"div",13),t.YNc(8,J,4,5,"div",13),t.qZA(),t.YNc(9,L,3,4,"h5",14),t.YNc(10,M,2,0,"h5",15),t.TgZ(11,"div",16),t.TgZ(12,"div",17),t.YNc(13,N,2,0,"button",18),t.YNc(14,U,1,2,"app-add-to-cart",19),t.YNc(15,Q,3,2,"button",20),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("routerLink",t.VKq(10,D,"/product/"+e.slug)),t.xp6(1),t.Q6J("imageUrl",e.images&&e.images.length>0?o.imgUrl+"/medium/"+e.images[0].filename:""),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",e.price>e.saleprice),t.xp6(1),t.Q6J("ngIf",e.price===e.saleprice),t.xp6(1),t.Q6J("ngIf",e.price>e.saleprice),t.xp6(1),t.Q6J("ngIf",0==+e.quantity),t.xp6(3),t.Q6J("ngIf","0"===e.quantity),t.xp6(1),t.Q6J("ngIf",e.quantity&&e.quantity>0),t.xp6(1),t.Q6J("ngIf",e.quantity)}}function H(i,n){if(1&i&&(t.ynx(0),t.YNc(1,q,16,12,"div",6),t.BQk()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",1==+e.enabled)}}function F(i,n){if(1&i&&(t.TgZ(0,"div",4),t.YNc(1,H,2,1,"ng-container",5),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.productsHolder)}}function R(i,n){1&i&&(t.TgZ(0,"h4",34),t._uU(1," Products Not Available "),t.qZA())}function W(i,n){1&i&&(t.TgZ(0,"h4",34),t._uU(1," Loading... "),t.qZA())}const $=[{path:":slug",component:(()=>{class i{constructor(e,o,s,c,r,m,k,z,E){this.commonService=e,this.route=o,this.meta=s,this.messageService=c,this.cartService=r,this.authService=m,this.dataLayerService=k,this.storageService=z,this.seoService=E,this.productsHolder=[],this.imgUrl=u.N.imgUrl,this.isWishlistAdded=[],this.isFetching=!1}ngOnInit(){this.commonService.baseUrls$.subscribe(e=>{var o,s;this.imgUrl=(null===(o=null==e?void 0:e.asset_url)||void 0===o?void 0:o.s3_link)||(null===(s=null==e?void 0:e.asset_url)||void 0===s?void 0:s.fallback)||u.N.imgUrl},()=>{this.imgUrl=u.N.imgUrl}),this.route.paramMap.subscribe(e=>{var o;this.title=e.params.slug;let s=null===(o=this.route.snapshot)||void 0===o?void 0:o.params.slug;this.getProductsBySlug(s)})}getProductsBySlug(e){this.isFetching=!0,this.commonService.postRequestWithSlug(e,{view:"variant"}).subscribe(s=>{this.productsHolder=s.products,this.isFetching=!1,this.seoService.setTitle(this.storageService.getLocalStorageData("meta-title")||this.title),this.seoService.setMetaTags(this.storageService.getLocalStorageData("meta-tags"))},s=>{this.isFetching=!1})}setMetaData(e){const o=this.seoService.parseMetaTags(null==e?void 0:e.meta);this.storageService.setLocalStorageData("meta-tags",o),this.storageService.setLocalStorageData("meta-title",null==e?void 0:e.seo_title)}addToCart(e,o){if(this.productId=e.id,this.productName=e.name,this.authService.isLoggedIn)this.cartService.addToCart({product_id:e.id,quantity:1}).subscribe(c=>{c.status?(this.messageService.add({severity:"success",detail:c.message}),this.addToCartAnimation(o),this.storageService.removeLocalStorageData("payload-for-selected-product")):(this.messageService.add({severity:"error",detail:c.message}),this.storageService.setLocalStorageData("product-id-before-login-for-add-to-cart",e.id))});else if("allowed"===this.storageService.getLocalStorageData("guest")){if(this.storageService.getSessionStorageData("guest-cart-items")){let c=this.storageService.getSessionStorageData("guest-cart-items");if(-1===c.findIndex(r=>r.id===e.id))e.item_quantity=1,e.cart_item_id=e.id,c.push(e),this.messageService.add({severity:"success",detail:"Product successfully added to cart"});else{let r=c.findIndex(m=>m.id===e.id);c[r]=Object.assign(Object.assign({},c[r]),{item_quantity:c[r].item_quantity+1}),this.messageService.add({severity:"success",detail:"Item quantity in cart has been increased"})}this.storageService.setSessionStorageData("guest-cart-items",c)}else e.item_quantity=1,e.cart_item_id=e.id,this.storageService.setSessionStorageData("guest-cart-items",[e]),this.messageService.add({severity:"success",detail:"Product successfully added to cart"});this.cartService.getTotalGuestCartItemsSubject.next(!0)}else this.commonService.loginPopupToggle$.next(!0);this.dataLayerService.push({event:"add_to_cart",ecommerce:{item_list_id:"add_to_cart",item_list_name:"Product Add to Cart",items:[{item_id:e.id,item_name:e.name,currency:"INR",item_variant:e.name,price:e.saleprice,quantity:e.item_quantity}]}})}addToCartAnimation(e){}wishlistToggle(e,o){this.storageService.getLocalStorageData("customer_data")?(this.commonService.getRequestWithToken(`add_to_wishlist?product_id=${e.id}`).subscribe(s=>{!0===(null==s?void 0:s.status)?this.isWishlistAdded[o]=!this.isWishlistAdded[o]:this.messageService.add({severity:"error",detail:s.message}),this.isWishlistAdded[o]&&this.dataLayerService.push({event:"add_to_wishlist",ecommerce:{item_list_id:"add_to_wishlist",item_list_name:"Product Add to Wishlist",items:[{item_id:e.id,item_name:e.name,currency:"INR",item_variant:e.name,price:e.saleprice,quantity:e.quantity}]}})}),this.storageService.removeLocalStorageData("before-login-wishlist-add")):(this.storageService.setLocalStorageData("before-login-wishlist-add",e.id),this.commonService.loginPopupToggle$.next(!0))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.v),t.Y36(l.gz),t.Y36(v.h_),t.Y36(h.ez),t.Y36(f.N),t.Y36(x.e),t.Y36(y.n),t.Y36(S.V),t.Y36(T.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-products"]],viewQuery:function(e,o){if(1&e&&t.Gf(C,5),2&e){let s;t.iGM(s=t.CRH())&&(o.notifyMeModal=s.first)}},decls:6,vars:3,consts:[[1,"container","py-3"],["class","row justify-content-center",4,"ngIf"],["class","heading text-center text-danger m-0 py-5",4,"ngIf"],["notifyMeModal",""],[1,"row","justify-content-center"],[4,"ngFor","ngForOf"],["class","col-sm-4 mb-3",4,"ngIf"],[1,"col-sm-4","mb-3"],[1,"accessories-product-box","h-100"],[3,"routerLink","click"],["imageContainerClass","mb-4","imageClass","product-item","imageContainerHeight","15rem",3,"imageUrl"],[1,"heading-link","mb-1"],[1,"price-holder","mt-2"],["class","price-box",4,"ngIf"],["class","price-discount m-0",4,"ngIf"],["class","out-of-stock m-0",4,"ngIf"],[1,"all-action-box","mt-3"],[1,"d-flex","justify-content-center","flex-sm-wrap"],["type","button","class","btn btn-primary mr-2",3,"click",4,"ngIf"],["styleClass","rounded",3,"showRoundButton","product",4,"ngIf"],["type","button","class","btn wishlist-btn",3,"click",4,"ngIf"],[1,"price-box"],[1,"price"],[3,"innerHTML"],[1,"price","ml-2",3,"innerHTML"],[1,"price-discount","m-0"],[1,"out-of-stock","m-0"],["type","button",1,"btn","btn-primary","mr-2",3,"click"],["styleClass","rounded",3,"showRoundButton","product"],["type","button",1,"btn","wishlist-btn",3,"click"],["class","far fa-heart","pTooltip","Add to Wishlist","tooltipPosition","bottom",4,"ngIf"],["class","fa fa-heart","pTooltip","Remove from Wishlist","tooltipPosition","bottom",4,"ngIf"],["pTooltip","Add to Wishlist","tooltipPosition","bottom",1,"far","fa-heart"],["pTooltip","Remove from Wishlist","tooltipPosition","bottom",1,"fa","fa-heart"],[1,"heading","text-center","text-danger","m-0","py-5"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,F,2,1,"div",1),t.YNc(2,R,2,0,"h4",2),t.YNc(3,W,2,0,"h4",2),t.qZA(),t._UZ(4,"app-notify-me-modal",null,3)),2&e&&(t.xp6(1),t.Q6J("ngIf",o.productsHolder&&o.productsHolder.length>0),t.xp6(1),t.Q6J("ngIf",o.productsHolder&&0===o.productsHolder.length&&!o.isFetching),t.xp6(1),t.Q6J("ngIf",o.isFetching))},directives:[d.O5,Z.o,d.sg,l.yS,A.g,b.I,_.u],pipes:[P.Y,d.H9,d.JJ],styles:[""]}),i})()}];let B=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[l.Bz.forChild($)],l.Bz]}),i})();var j=a(8769);let O=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.ez,B,j.m,_.z]]}),i})()}}]);