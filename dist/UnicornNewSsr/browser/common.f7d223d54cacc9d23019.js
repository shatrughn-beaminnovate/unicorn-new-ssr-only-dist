"use strict";(self.webpackChunkunicorn_new_ssr=self.webpackChunkunicorn_new_ssr||[]).push([[592],{6074:(C,I,n)=>{n.d(I,{t:()=>h});var l=n(2340),m=n(1841),e=n(7716),s=n(4128),M=n(2323);let h=(()=>{class p{constructor(r,t,i){this.http=r,this.cartService=t,this.storageService=i,this.paymentApiUrl=l.N.paymentApiUrl}getPaymentModules(r){let t=new m.WM({"X-Auth-Token":`${this.storageService.getLocalStorageData("customer_token")}`,Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRfbmFtZSI6ImFkbWluIiwiaWF0IjoxNjk0MTU3NjIwLjAsIm5iZiI6MTY5NDE1NzYyMSwiZXhwIjoxNjk0NDE2ODIxfQ.qem0n81kBluklK1e4Uqi5nzZGBvHRh0tDX_kSWdmDPI"});l.N.customerIdAllowed&&(t=t.append("customer-id",`${l.N.customerId}`));const i={headers:t};let c=l.N.isCheckoutUrlStatic?this.paymentApiUrl:this.cartService.checkoutBaseUrl$.getValue()?this.cartService.checkoutBaseUrl$.getValue()+"/public/api/v1/transactions":this.paymentApiUrl;return this.http.get(r?`${c}/get_payment_modules?pincode=${r}`:`${c}/get_payment_modules`,i)}processPayment(r={}){let t=new m.WM({"X-Auth-Token":`${this.storageService.getLocalStorageData("customer_token")}`,Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRfbmFtZSI6ImFkbWluIiwiaWF0IjoxNjk0MTU3NjIwLjAsIm5iZiI6MTY5NDE1NzYyMSwiZXhwIjoxNjk0NDE2ODIxfQ.qem0n81kBluklK1e4Uqi5nzZGBvHRh0tDX_kSWdmDPI"});l.N.customerIdAllowed&&(t=t.append("customer-id",`${l.N.customerId}`));const i={headers:t};let c=l.N.isCheckoutUrlStatic?this.paymentApiUrl:this.cartService.checkoutBaseUrl$.getValue()?this.cartService.checkoutBaseUrl$.getValue()+"/public/api/v1/transactions":this.paymentApiUrl;return this.http.post(`${c}/process_payment`,r,i)}checkPaymentStatus(r){let t=new m.WM({"X-Auth-Token":`${this.storageService.getLocalStorageData("customer_token")}`,Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRfbmFtZSI6ImFkbWluIiwiaWF0IjoxNjk0MTU3NjIwLjAsIm5iZiI6MTY5NDE1NzYyMSwiZXhwIjoxNjk0NDE2ODIxfQ.qem0n81kBluklK1e4Uqi5nzZGBvHRh0tDX_kSWdmDPI"});l.N.customerIdAllowed&&(t=t.append("customer-id",`${l.N.customerId}`));const i={headers:t};let c=l.N.isCheckoutUrlStatic?this.paymentApiUrl:this.cartService.checkoutBaseUrl$.getValue()?this.cartService.checkoutBaseUrl$.getValue()+"/public/api/v1/transactions":this.paymentApiUrl;return this.http.get(`${c}/check_payment_status?order_id=${r}`,i)}makePayment(r,t={},i,c){const d={headers:new m.WM(Object.assign({"customer-id":`${l.N.customerId}`},i))};let f=l.N.isCheckoutUrlStatic?this.paymentApiUrl:this.cartService.checkoutBaseUrl$.getValue()?this.cartService.checkoutBaseUrl$.getValue()+"/public/api/v1/transactions":this.paymentApiUrl;return this.http.post(`${f}`,t,d)}isValidURL(r){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(r)}}return p.\u0275fac=function(r){return new(r||p)(e.LFG(m.eN),e.LFG(s.N),e.LFG(M.V))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},4385:(C,I,n)=>{n.d(I,{g:()=>p});var l=n(5917),m=n(8002),e=n(5304),s=n(7716),M=n(1841),h=n(8583);let p=(()=>{class _{constructor(t,i){this.cd=t,this.http=i,this.imageLoading=!0,this.imageLoaded=!1,this.imageUrl="",this.imageLoadingUrl="assets/img/loader/3.gif",this.noImageUrl="assets/img/not-found/no-image-found.png",this.alt="Image Not Available",this.imageId="",this.imageClass="",this.imageContainerHeight="",this.imageContainerWidth="",this.imageContainerClass="",this.isLoadingImageExists=!0}ngOnInit(){this.checkAppFileExists(this.imageLoadingUrl).subscribe(t=>{this.isLoadingImageExists=t})}checkAppFileExists(t){return this.http.get(t,{responseType:"text"}).pipe((0,m.U)(i=>!0),(0,e.K)(i=>(0,l.of)(!1)))}onImageLoaded(){this.imageLoading=!1}handleEmptyImage(){this.imageLoading=!1,this.isLoadingImageExists&&(this.imageUrl=this.noImageUrl)}}return _.\u0275fac=function(t){return new(t||_)(s.Y36(s.sBO),s.Y36(M.eN))},_.\u0275cmp=s.Xpm({type:_,selectors:[["app-image-loader"]],inputs:{imageLoading:"imageLoading",imageLoaded:"imageLoaded",imageUrl:"imageUrl",imageLoadingUrl:"imageLoadingUrl",noImageUrl:"noImageUrl",alt:"alt",imageId:"imageId",imageClass:"imageClass",imageContainerHeight:"imageContainerHeight",imageContainerWidth:"imageContainerWidth",imageContainerClass:"imageContainerClass",id:"id"},decls:2,vars:10,consts:[[1,"image-container",3,"ngClass"],["loading","lazy",1,"img-fluid",3,"src","alt","id","ngClass","load","error"]],template:function(t,i){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"img",1),s.NdJ("load",function(){return i.onImageLoaded()})("error",function(){return i.handleEmptyImage()}),s.qZA(),s.qZA()),2&t&&(s.Udp("height",i.imageContainerHeight)("width",i.imageContainerWidth),s.Q6J("ngClass",i.imageContainerClass),s.xp6(1),s.Q6J("src",i.imageLoading?i.imageLoadingUrl:i.imageUrl,s.LSH)("alt",i.alt)("id",i.imageId)("ngClass",i.imageClass),s.uIk("id",i.id))},directives:[h.mk],styles:[".image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;overflow:hidden}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;width:auto}"]}),_})()},3990:(C,I,n)=>{n.d(I,{o:()=>c});var l=n(8259),m=n.n(l),e=n(7716),s=n(690),M=n(4611),h=n(3679),p=n(845),_=n(8583);function r(d,f){if(1&d){const o=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"input",10),e.NdJ("ngModelChange",function(g){return e.CHM(o),e.oxw().otp=g}),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){return e.CHM(o),e.oxw().verifyOtp()}),e._uU(4,"Verify"),e.qZA(),e.qZA(),e.qZA()}if(2&d){const o=e.oxw();e.xp6(2),e.Q6J("ngModel",o.otp)}}function t(d,f){if(1&d&&(e.TgZ(0,"label",12),e._uU(1,"Resend OTP In "),e.TgZ(2,"span",13),e._uU(3),e.qZA(),e._uU(4," seconds."),e.qZA()),2&d){const o=e.oxw();e.xp6(3),e.Oqu(o.isOtpResendTimerStart)}}const i=function(){return{width:"25rem"}};let c=(()=>{class d{constructor(o){this.commonService=o,this.isNotifyMeModalShow=!1,this.isOtpSent=!1,this.isOtpResendTimerStart=30,this.loading=!1}ngOnInit(){}show(o){this.productId=o,this.isNotifyMeModalShow=!0}sendOtp(){let o=!0;this.customerName||(o=!1,m().fire({icon:"error",title:"Error",html:"Please enter name",timer:5e3})),o&&(this.mobile||(o=!1,m().fire({icon:"error",title:"Error",html:"Please enter mobile number",timer:5e3})),/^[6-9]\d{9}$/.test(this.mobile)||(o=!1,m().fire({icon:"error",title:"Error",html:"Please enter valid mobile number",timer:5e3})),o&&o&&(this.loading=!0,this.commonService.postRequest("validate_number",{phone:this.mobile}).subscribe(g=>{if(!0===g.status){this.isOtpSent=!0;let u=setInterval(()=>{this.loading=!1,0!=+this.isOtpResendTimerStart?this.isOtpResendTimerStart-=1:clearInterval(u)},1e3)}else this.loading=!1,this.isOtpSent=!1,m().fire({icon:"error",title:"Error",text:g.response||"Please enter valid mobile number",timer:5e3})},()=>{this.loading=!1,this.isOtpSent=!1,m().fire({icon:"error",title:"Error",html:"Something went wrong",timer:5e3})})))}verifyOtp(){this.commonService.postRequest("verify_otp",{phone:this.mobile,name:this.customerName,otp:this.otp,product_id:this.productId}).subscribe(a=>{var g;!0===a.status?null===(g=m().fire({icon:"success",title:"Success",html:a.message||"Thank You! <br> When product is available you got a mail",timer:5e3}))||void 0===g||g.then(()=>{this.isNotifyMeModalShow=!1}):m().fire({icon:"error",title:"Error",html:a.message||"Please enter valid OTP",timer:5e3})})}clearInput(){this.customerName="",this.mobile="",this.otp=""}}return d.\u0275fac=function(o){return new(o||d)(e.Y36(s.v))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-notify-me-modal"]],decls:9,vars:13,consts:[["position","top","header","Notify Me","position","center",3,"visible","modal","draggable","resizable","visibleChange"],[1,"mb-3"],["type","text","name","customer_name","id","notify_customer_name","placeholder","Enter your name...",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","tel","name","mobile","id","notify_mobile","maxlength","10","pattern","^\\d{10}$","placeholder","Enter your phone number...",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"text-right"],["label","Send OTP","styleClass","p-button-success p-button-sm",3,"loading","disabled","onClick"],["class","mb-3 mt-3",4,"ngIf"],["class","otp-resend-message",4,"ngIf"],[1,"mb-3","mt-3"],[1,"d-flex","align-items-center"],["type","text","name","otp","id","otp","maxlength","6","pattern","^\\d{6}$","placeholder","Enter OTP...",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-success","btn-sm","ml-2",3,"click"],[1,"otp-resend-message"],[1,"timer"]],template:function(o,a){1&o&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(u){return a.isNotifyMeModalShow=u}),e.TgZ(1,"div",1),e.TgZ(2,"input",2),e.NdJ("ngModelChange",function(u){return a.customerName=u}),e.qZA(),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"input",3),e.NdJ("ngModelChange",function(u){return a.mobile=u}),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"p-button",5),e.NdJ("onClick",function(){return a.sendOtp()}),e.qZA(),e.qZA(),e.YNc(7,r,5,1,"div",6),e.YNc(8,t,5,1,"label",7),e.qZA()),2&o&&(e.Akn(e.DdM(12,i)),e.Q6J("visible",a.isNotifyMeModalShow)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("ngModel",a.customerName),e.xp6(2),e.Q6J("ngModel",a.mobile),e.xp6(2),e.Q6J("loading",a.loading)("disabled",a.loading||a.isOtpResendTimerStart>1&&a.isOtpResendTimerStart<30),e.xp6(1),e.Q6J("ngIf",a.isOtpSent),e.xp6(1),e.Q6J("ngIf",a.isOtpResendTimerStart>1&&a.isOtpResendTimerStart<30))},directives:[M.V,h.Fj,h.JJ,h.On,h.nD,h.c5,p.zx,_.O5],styles:[""]}),d})()}}]);